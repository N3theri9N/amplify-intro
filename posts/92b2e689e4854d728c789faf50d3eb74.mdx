---
title : Jest á„‹á…µá†¸á„†á…®á†«
date: 2022-09-10
tag: Test,FrontEnd
---

# Jest ì…ë¬¸

ìƒì„± ì¼ì‹œ: 2022ë…„ 9ì›” 10ì¼ ì˜¤í›„ 1:02

**UNIT TESTING**

JEST ê³µì‹ ë¬¸ì„œ : [https://jestjs.io/](https://jestjs.io/)

ê°œë°œìë¡œì„œ íŠ¹ì • ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œí—˜ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì™”ë‹¤. ê·¸ê°„ í•­ìƒ í•´ ì™”ë˜ ê²ƒì´ê³  ì•„í”„ë¡œë„ ê·¸ëŸ´ ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ ëª¨ë“  ê²½ìš°ì™€ ì¡°ê±´ ëŒ€í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸°ë€ ì–´ë µë‹¤. ê·¸ë¦¬ê³  ê·¸ ê³¼ì •ì— ì–´ë–¤ ì†ì„±ì„ ì†ìƒ ì‹œí‚¬ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ, ë³€ê²½ ì‚¬í•­ì„ ë°©ì¹˜í•´ë‘ê³  ê·¸ëŒ€ë¡œ ë°°í¬í•  ìœ„í—˜ë„ ì¡´ì¬í•œë‹¤. ê·¸ë¡œ ì¸í•´ ì¶”ê°€ ì‘ì—…í•  ê°€ëŠ¥ì„±ë„ ìˆë‹¤. ( ì‹¤ì œë¡œ ê²ªì–´ë³´ì•˜ê³  )

í•˜ì§€ë§Œ ì´ë¥¼ QA ê°€ ë‹´ë‹¹í•  ìˆ˜ë™ í…ŒìŠ¤íŠ¸ë¥¼ ëŒ€ì²´í•˜ì§„ ì•Šìœ¼ë©°, ìˆ˜ì • ì‹œ ì›ë˜ ë˜ì–´ì•¼ í•  ê¸°ëŠ¥ì´ ê°„ê³¼í•˜ì—¬ ë°°í¬ë˜ëŠ” ê²ƒì„ ë§‰ëŠ” ê²ƒì„ ìµœìš°ì„  ëª©í‘œë¡œ í•œë‹¤. 

# ìë™í™” í…ŒìŠ¤íŠ¸

![](https://nnea5215.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd9190dd3-cb8b-4ec8-9735-f8a6cab66acf%2FUntitled.png?table=block&id=21c53301-1a34-4960-a5ca-9c51c31ae094&spaceId=b67b8caf-0e30-4e9a-b6db-84175dd949a3&width=2000&userId=&cache=v2)

í…ŒìŠ¤íŠ¸ì— ê´€ë ¨ëœ ì–˜ê¸°ë¥¼ í•˜ìë©´ ì—¬ëŸ¬ ìœ í˜•ì´ ìˆë‹¤.

- **ìœ ë‹› í…ŒìŠ¤íŠ¸ ( Unit Tests )** : í•œ ê°œ í•œ ê°œì˜ í•¨ìˆ˜ë¥¼ í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤. ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ì™€ ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸. ëª¨ë“  ë‹¨ìœ„, í•¨ìˆ˜ ë° ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ”ê²Œ ì¢‹ìŒ. ê°€ì¥ ì¼ë°˜ì ì¸ ìœ í˜•
- **í†µí•© í…ŒìŠ¤íŠ¸ ( Integration Tests )** : ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œì˜ ì¡°í•©ì„ í…ŒìŠ¤íŠ¸í•˜ë©°, ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë§Œí¼ ì¢…ë¥˜ê°€ ë§ì§€ ì•ŠìŒ. ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì¬ì‚¬ìš© í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸í•œë‹¤.
- **ì „ êµ¬ê°„ í…ŒìŠ¤íŠ¸ ( End-to-End Tests ; a.k.a e2e-Test )** : ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ í…ŒìŠ¤íŠ¸. ì‹¤ì œë¡œ ì‚¬ëŒì´ ì‹¤í–‰í•  ë•Œ ì‹¤í–‰ ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤. ëª¨ë“  ê²ƒì˜ ìë™í™”ë‚˜ ë§ˆì°¬ê°€ì§€ì´ë‹¤. ì „ì²´ì ì¸ íë¦„ì„ ë‹¤ë£¨ëŠ” ë§Œí¼ í…ŒìŠ¤íŠ¸ ìˆ˜ëŠ” ê°€ì¥ ì ìŒ.

# What? How?

ë¬´ì—‡ì„ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ê°€?

ì½”ë“œê°€ ë‹¤ë¥¸ ë„êµ¬ì— ì˜í•´ ì‹¤í–‰ë˜ëŠ” ë°©ë²•ê³¼ ê°™ì´ í…ŒìŠ¤íŒ… ì½”ë“œì— ì–´ë–¤ ì¢…ë¥˜ì˜ ì½”ë“œë¥¼ ë„£ì„ì§€ ê³ ë¯¼í•  í•„ìš”ê°€ ìˆìŒ.

- **What** : ì•±ì„ êµ¬ì„±í•˜ëŠ” ê°€ì¥ ì‘ê³  ì§‘ì¤‘ëœ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸ë¡œ ê°ê° í•˜ë‚˜ì˜ ì£¼ìš” ì‚¬í•­ë§Œ í…ŒìŠ¤íŠ¸í•œë‹¤. í° ê·œëª¨ì˜ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ ì¸¡ì • í•œë‹¤ë©´ ì–´ë””ì„œ ìˆ˜ì •í•  ì§€ í™•ì¸í•˜ê¸°ê°€ ì–´ë ¤ì›€
- **How** : ë°œìƒí•  ìˆ˜ ìˆëŠ” ì„±ê³µ ë° ì˜¤ë¥˜ ì‚¬ë¡€ë¥¼ ëª¨ë‘ í…ŒìŠ¤íŠ¸í•¨ ë“œë¬¼ì§€ë§Œ ê°€ëŠ¥í•œ ì‹œë‚˜ë¦¬ì˜¤ì™€ ê²°ê³¼ë„ í…ŒìŠ¤íŠ¸í•œë‹¤. ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì‹œì‘í•˜ë©´ ëª…í™•í•´ì§ˆ ê²ƒ.

# Testing Code

ì´ì œ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ê°€? ì´ì™€ 

1. ì¼ë‹¨ í…ŒìŠ¤íŒ… ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•œ íˆ´ì´ í•„ìš”í•˜ë‹¤. â†’ Jest ë¼ì´ë¸ŒëŸ¬ë¦¬ 
2. React Appê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°€ìƒì˜ ë¸Œë¼ìš°ì €ì— ì‹œë®¬ë ˆì´íŒ… í•˜ëŠ” ë°©ë²•ì„ êµ¬í˜„í•œë‹¤. â†’ React Testing ë¼ì´ë¸ŒëŸ¬ë¦¬

ì´ 2ê°œì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëª¨ë‘ create-react-app ìœ¼ë¡œ ì„¤ì¹˜í•  ë•Œ ì´ë¯¸ ê°™ì´ ì„¤ì¹˜ëœë‹¤. ( ì—†ì–´ë„ ì‰½ê²Œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë‹¤ )

```jsx
"dependencies": {
    **"@testing-library/jest-dom": "5.16.5",
    "@testing-library/react": "13.4.0",
    "@testing-library/user-event": "14.4.3",**
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "react-scripts": "4.0.0"
  },
```

ì—¬ê¸°ì„œ jest ëŠ” ë³´ì´ì§€ ì•Šì§€ë§Œ, jest-dom ì€ jest ì˜ í•˜ìœ„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.

# First Test

**CRA** ë¡œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤ë©´ `App.test.js`íŒŒì¼ì´ ê°™ì´ ìƒì„±ëœë‹¤. ìœ ë‹› í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” `*.test.js` í™•ì¥ìë¥¼ ê°–ëŠ”ë‹¤. 

```jsx
import { render, screen } from "@testing-library/react";
import App from "./App";

test("renders learn react link", () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});
```

test í•¨ìˆ˜ëŠ” 2ê°œì˜ ì¸ìë¥¼ ê°–ëŠ”ë‹¤.

1. **í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ â€œì„¤ëª…â€** ì´ë©° ì–´ë–¤ í…ŒìŠ¤íŠ¸ì¸ì§€ ì‹ë³„/êµ¬ë¶„ í•  ìˆ˜ ìˆëŠ” ë‚´ìš©ìœ¼ë¡œ ì§€ì„ ê²ƒ
2. **ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸**í•˜ëŠ” ìµëª… í•¨ìˆ˜

ê°€ìƒìœ¼ë¡œ render í•¨ìˆ˜ë¡œ Appì„ ë‚´ë¦° ë‹¤ìŒ `screen`ì— ëª‡ëª‡ **Elements** ë¥¼ ****ê°–ëŠ”ë‹¤. `toBeInTheDocument` ë¥¼ í†µí•´ ì´ **Elements** ê°€ ì‹¤ì œë¡œ ë¬¸ì„œ ë‚´ì— ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. 

ê·¸ëŸ¬ë¯€ë¡œ App.js ì— ì´ ë‚´ìš©ì´ ìˆëŠ”ì§€ ì˜ˆì¸¡í•œë‹¤.

ì´ì œ ì´ê²ƒì„ ì‹¤í–‰í•˜ëŠ”ë° `npm start` ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `npm test` ë¡œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•œë‹¤.

![Untitled](https://nnea5215.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F15d8a940-cbc6-4533-ad49-0fd94ccc8cb7%2FUntitled.png?table=block&id=f2ad9bd9-d2c9-493e-9a92-bd314fa789fd&spaceId=b67b8caf-0e30-4e9a-b6db-84175dd949a3&width=2000&userId=&cache=v2)

ê·¸ë¦¬ê³  ì—¬ê¸°ì„œ a ë¥¼ ëˆ„ë¥¸ë‹¤ë©´ `.test.js` **ë¡œ ëë‚˜ëŠ” ëª¨ë“  íŒŒì¼**ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤. í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í„°ë¯¸ë„ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤. 

ì´ ê¸€ì„ ì‘ì„±í•œ ì‹œì ì—ì„  VS ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœë¼, codeSandbox ì—ì„œ ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ í™”ë©´ì„ ì˜¬ë ¤ë³¸ë‹¤.  ( ì—¬ê¸°ì„  `npm test` ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìë™ìœ¼ë¡œ ì»´íŒŒì¼ í•´ì¤€ë‹¤. ) 

![Untitled](https://nnea5215.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F36a261de-eda3-4391-9b14-a35527c931ae%2FUntitled.png?table=block&id=e8ec96c3-1e60-48a2-90ba-43e2621d8937&spaceId=b67b8caf-0e30-4e9a-b6db-84175dd949a3&width=2000&userId=&cache=v2)

ë§Œì•½ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨ í–ˆì„ ê²½ìš° í…ŒìŠ¤íŒ… ì½”ë“œê°€ ì–´ë””ì„œ ì‹¤íŒ¨í–ˆëŠ”ì§€ ë””ë²„ê¹…ì„ í•´ë³¼ ìˆ˜ ìˆìŒ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•œ ì›ì¸ì„ ë³¼ ìˆ˜ ìˆìœ¼ë©°, ìƒí™© ë”°ë¼ í…ŒìŠ¤íŠ¸ ì½”ë“œë‚˜ ì›ë³¸ ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•œë‹¤. 

ë‹¤ë¥¸ npm run ê³¼ ë¹„ìŠ·í•˜ê²Œ ctrl + c ë¡œ ì¢…ë£Œí•  ìˆ˜ ìˆìŒ

# Create First Test

ì´ì œ ì²« í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ë§Œë“¤ê¸° ì•ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ë‘”ë‹¤.

`/components/Greeting.js`

```jsx
const Greeting = () => {
  return (
    <div>
      <h2>Hello World</h2>
      <p>It's good to see you!</p>
    </div>
  );
};

export default Greeting;
```

State ë„ Props ë„ ì—†ëŠ” ê°„ë‹¨í•œ êµ¬ì¡°ë‹¤. 
ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ App.js ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë°”ê¿ˆ ( ê³¼ì • ì„¤ëª… ìƒëµ )

ì´ì œ App í˜¹ì€ Greeting ì— í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë• **í…ŒìŠ¤íŠ¸ í•˜ê³ ì í•˜ëŠ” ê²ƒì— ê°€ëŠ¥í•˜ë©´ ê°€ê¹ê²Œ ì‘ì„±**í•´ì•¼ ì¢‹ìŒ

ê·¸ëŸ¬ë¯€ë¡œ `/components/Greeting.test.js` ì½”ë“œë¥¼ ìƒì„±í•´ì„œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤. `test()` ëŠ” **ì „ì—­ í•¨ìˆ˜**ì´ë¯€ë¡œ ì–´ë””ë“  ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.

```jsx
test('renders Hello World as a text', ()=> {
  
});
```

## AAA Pattern

ì•ˆì— í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ 3ê°€ì§€ ê³¼ì •ì„ ê±°ì¹˜ëŠ”ë° **3A** í˜¹ì€ **AAA** ë¼ê³  ë¶€ë¥¸ë‹¤.

- **Arrange ( ì¤€ë¹„ )** : í…ŒìŠ¤íŠ¸ í•˜ê³ ì í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê¸° ì›í•œë‹¤. ìš”êµ¬ëœë‹¤ë©´ ì¼ë°˜ì ì¸ ì„¤ì •ë„ ê³ë“¤ì¸ë‹¤.
- **Act ( ì‹¤í–‰ )** : ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒë“¤. ì˜ˆë¥¼ ë“¤ì–´ ë²„íŠ¼ í´ë¦­ ë“¤ì„ í…ŒìŠ¤íŠ¸
- **Assert ( ë‹¨ì–¸ )** : ë¸Œë¼ìš°ì €ì—ì„œ ë‚˜ì˜¤ëŠ” ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•œë‹¤. ë‹¨ì–¸ ì‹œì— ì‹¤í–‰ ê°€ëŠ¥í•œ í•¨ìˆ˜ëŠ” get, find, query ë“±ì´ ìˆë‹¤. ì´ë“¤ì˜ ì°¨ì´ì ì€ ë¦¬í„´ íƒ€ì… ë“¤.

```jsx
import { render, screen } from '@testing-library/react'
import Greeting from "./Greeting";

test('renders Hello World as a text', ()=> {
  // Arrange
  render(<Greeting />);

  // Act
  // ...nothing

  // Assert 
  //screen.getByText('Hello World', { exact: false }) // ì´ ì˜µì…˜ì€ í•˜ìœ„ ë¬¸ìì—´ë„ ë§¤ì¹­ëœë‹¨ ëœ»
	const helloWorldElement = screen.getByText("Hello World");
  expect(helloWorldElement).toBeInTheDocument(true);	
});
```

`*.test.js` íŒŒì¼ì—ëŠ” **ìµœì†Œ í•œ ê°œ ì´ìƒì˜ `test()`ê°€ ì„ ì–¸**ë˜ì–´ì•¼ ì˜¤ë¥˜ê°€ ìƒê¸°ì§€ ì•ŠëŠ”ë‹¤. 

# Test Suites

ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¤ì§ˆ ìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ê·œëª¨ê°€ ì»¤ì§€ëŠ”ë°, ë¹„ìŠ·í•œ ìœ í˜•ë¼ë¦¬ Testing Suites ì— ë¬¶ì–´ ì •ë¦¬í•œë‹¤. í•˜ë‚˜ì— ì»´í¬ë„ŒíŠ¸ì— ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ê°™ì€ Suites ì— ì¶”ê°€í•œë‹¤. 

ì „ì—­ í•¨ìˆ˜ `describe()` ë¡œ ì´ë¦„ì„ ì •í•´ë‘”ë‹¤. ì´ í•¨ìˆ˜ëŠ” 2ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°–ëŠ”ë°

1. Suite ì— ë¬¶ì„ ì´ë¦„
2. `test()`ë“¤ì´ ë‚˜ì—´ëœ ìµëª… í•¨ìˆ˜

```jsx
import { render, screen } from '@testing-library/react'
import Greeting from "./Greeting";

describe("Greeting Component test", () => {
	test('renders Hello World as a text', () => {
	  // Arrange
	  render(<Greeting />);
	
	  // Act
	  // ...nothing
	
	  // Assert 
	  //screen.getByText('Hello World', { exact: false }) // ì´ ì˜µì…˜ì€ í•˜ìœ„ ë¬¸ìì—´ë„ ë§¤ì¹­ëœë‹¨ ëœ»
		const helloWorldElement = screen.getByText("Hello World");
	  expect(helloWorldElement).toBeInTheDocument(true);	
	});
})

```

# Interact & State Test

ì»´í¬ë„ŒíŠ¸ì˜ ìœ ì € ìƒí˜¸ì‘ìš©ê³¼ State ê°’ì— ê´€ë ¨í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ëŒ€ì‘í•´ë³¸ë‹¤.

ê¸°ì¡´ Greeting ì»´í¬ë„ŒíŠ¸ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤.

```jsx
import { useState } from "react";

const Greeting = () => {
  const [changedText, setChangedText] = useState(false);

  const changeTextHandler = () => {
    setChangedText(true);
  };

  return (
    <div>
      <h2>Hello World</h2>
      {!changedText && <p>It's good to see you!</p>}
      {changedText && <p>Changed!</p>}
      <button onClick={changeTextHandler}>Change Text!</button>
    </div>
  );
};

export default Greeting;
```

ë²„íŠ¼ì´ ìƒˆë¡œ ì¶”ê°€ë˜ì—ˆê³  í´ë¦­ ì‹œ paragraph ì˜ í…ìŠ¤íŠ¸ê°€ ë°”ë€ë‹¤. 

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê±´ **ê°€ëŠ¥í•œ ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤**ë¥¼ ë„£ì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë‹¤ë¥¸ ì‹œë‚˜ë¦¬ì˜¤ê°€ í‹€ë ¸ë‹¨ ê²ƒì„ í™•ì¸ í•  ìˆ˜ê°€ ì—†ì–´ì§„ë‹¤. ( ì˜ˆë¥¼ ë“¤ì–´ í´ë¦­ í›„ ê¸°ì¡´ ìƒíƒœì— ë‚˜ì˜¤ë˜ ë‚´ìš©ë„ ì—†ì–´ì¡ŒëŠ”ê°€. )

ê·¸ëŸ¬ë¯€ë¡œ 2ê°œì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œë‹¤. í´ë¦­ í–ˆì„ ë•Œë‘ ì•ˆ í–ˆì„ ë•Œ

```jsx
import { render, screen } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import Greeting from "./Greeting";

describe("Greeting Component test", () => {
  test("renders Hello World as a text", () => {
    // Arrange
    render(<Greeting />);

    // Act
    // ...nothing

    // Assert
    //screen.getByText('Hello World', { exact: false }) // ì´ ì˜µì…˜ì€ í•˜ìœ„ ë¬¸ìì—´ë„ ë§¤ì¹­ëœë‹¨ ëœ»
    const helloWorldElement = screen.getByText("Hello World");
    expect(helloWorldElement).toBeInTheDocument(true);
  });

  test("renders good to see you if the button was NOT clicked", () => {
    render(<Greeting />);
    const outputElement = screen.getByText("good to see you", { exact: false });
    expect(outputElement).toBeInTheDocument(true);
  });

  test("renders Changed if the button was CLICKED", async () => {
    // Arrange
    render(<Greeting />);

    // Act
    const buttonElement = screen.getByRole("button");
    await userEvent.click(buttonElement);

    // Assert
    const outputElement = screen.getByText("Changed", { exact: false });
    expect(outputElement).toBeInTheDocument(true);
  });
});
```

ì¡ì„¤ë¡œ CodeSandBox í™˜ê²½ì—ì„œ í´ë¦­ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ëŠ” async/await ë¥¼ ì ìš©í–ˆë‹¤. í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° í…ŒìŠ¤íŠ¸ê°€ ì›í•  í•˜ì§€ ì•Šì•˜ë‹¤. ( ê·¸ ì™¸ì—ë„ ë²„ê·¸ê°€ ì¢€ ìˆë‹¤â€¦ `expect()` ëŠ” ì „ì—­ í•¨ìˆ˜ì§€ë§Œ, not defined ì—ëŸ¬ê°€ ìƒê¸°ëŠ” ë“±â€¦ )

í´ë¦­ í›„ ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ëŠ” ì²˜ìŒìœ¼ë¡œ Act ë¥¼ ì ìš©í•œ ê²½ìš°ì¸ë° ë²„íŠ¼ì„ í´ë¦­ì„ í•œ ì´í›„ì˜ ìƒíƒœë¥¼ ì¶”ì •í•˜ê¸° ìœ„í•œ ì¥ì¹˜ë¥¼ ë§ˆë ¨í–ˆë‹¤. 

í…ŒìŠ¤íŠ¸ë¥¼ í•©ë‹¹í•˜ê²Œ í•˜ë ¤ë©´ ì—¬ê¸°ì„œ ì–´ë–¤ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¼ ìˆ˜ ìˆì„ê¹Œ. ê°œë°œìê°€ ì˜¤ë¥˜ë¥¼ ë‚´ì„œ ëœë”ë§í•˜ëŠ” ê²ƒì„ ê¹œë¹¡í•œ ê²½ìš°ë„ í…ŒìŠ¤íŠ¸ í•´ë´ì•¼ í•œë‹¤. ë²„íŠ¼ì„ í´ë¦­ í•œ í›„ good to see you ê°€ ì—†ì–´ì¡ŒëŠ”ì§€ë„ í…ŒìŠ¤íŠ¸ í•´ì•¼ í•œë‹¤.

```jsx
test("does not render good to sdd you if the button was clicked", async () => {
    // Arrange
    render(<Greeting />);

    // Act
    const buttonElement = screen.getByRole("button");
    await userEvent.click(buttonElement);

    // Assert
    const outputElement = screen.queryByText("good to see you", {
      exact: false
    });
    expect(outputElement).**toBeNull();**
  });
```

ì—¬ê¸°ì„œ `queryByText` ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° get ì€ ì•„ë¬´ ê²ƒë„ ì°¾ì§€ ëª»í•  ê²½ìš°, ì˜¤ë¥˜ë¥¼ ì¼ìœ¼í‚¤ë¯€ë¡œ ì˜ë„ì ìœ¼ë¡œ ì—†ìŒì„ í…ŒìŠ¤íŠ¸ í•˜ë ¤ë©´ **query í•¨ìˆ˜**ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë§¤ì¹­ í•˜ê¸° ìœ„í•´ `toBeNull()` ë¡œ ê²°ê³¼ë¥¼ íŒë‹¨í•œë‹¤.

# Multiple Components

ì´ì œ ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ê°€ ìˆëŠ” ê²½ìš°ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³¸ë‹¤. 

`props`ê°€ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ `Output.js` ë¥¼ ìƒì„±í•œë‹¤.

```jsx
const Output = (props) => {
  return <p>{props.children}</p>;
};

export default Output;
```

ì´ì œ Greeting ë˜í•œ ìœ„ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•œë‹¤.

```jsx
<div>
  <h2>Hello World</h2>
  {!changedText && <Output children="It's good to see you!" />}
  {changedText && <Output children="Changed!" />}
  <button onClick={changeTextHandler}>Change Text!</button>
</div>
```

ê·¸ëŸ°ë° ì´ë ‡ê²Œ ë°”ê¾¸ëŠ” ì™€ì¤‘ì—ë„ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì •ìƒ ì‘ë™í•œë‹¤. render ì˜ ì¢‹ì€ ì ì´ë¼ê³  í•œë‹¤. ìš”êµ¬ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ë¥¼ ë Œë”ë§ í•˜ëŠ” ì¤‘ì´ë‹¤. 

ì´ì œ í•˜ë‚˜ ì´ìƒì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì—®ì—ˆìœ¼ë¯€ë¡œ **â€˜í†µí•© í…ŒìŠ¤íŠ¸â€™** ë¼ê³  ë¶€ë¥¼ë§Œí•œ ìƒí™©ì´ ë˜ì—ˆë‹¤.

# Async CodeTest

ì´ì œ ì¡°ê¸ˆ ë³µì¡í•œ ê²½ìš°ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³¸ë‹¤. `Async.js` ë¼ëŠ” ì½”ë“œë¥¼ ìƒì„±í–ˆê³  fetch ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜ì˜¤ëŠ” ë‚´ìš©ì´ë‹¤.

```jsx
import { useEffect, useState } from "react"

const Async = () => {
  const [posts, setPosts] = useState([]);

  useEffect(()=>{
    fetch('https;//jsonplaceholder.typicode.com/posts')
      .then((response) => response.json())
      .then((data) => {
        setPosts(data);
      });
  }, []);

  return (
    <div>
      <ul>
        {posts.map((post) => (
          <li key={post.id}>{post.title}</li>
        ))}
      </ul>
    </div>
  );
}
```

ì´ì œ Async ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ íŒŒì¼ `Async.test.js` ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì²˜ëŸ¼ ì‘ì„±í•œë‹¤.

```jsx
import { render, screen } from "@testing-library/react";
import Async from "./Async";

describe("async component", () => {
  test("renders posts if request succedds", () => {
    render(<Async />);

    const listItemElemlents = screen.getAllByRole("listitem");
    expect(listItemElemlents).not.toHaveLength(0);
  });
});
```

ì—¬ê¸°ì„œ  `getAllByRole('listitem')` ì„ ì‚¬ìš©í•˜ëŠ”ë° 2ê°œ ì´ìƒì¼ ê²½ìš°ëŠ” ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

ì €ì¥í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•´ë³´ë©´ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•œë‹¤. ê·¸ ì´ìœ ëŠ” listitem ì´ë€ ì—­í• ì„ ì§€ë‹Œ ê²ƒì„ ëª» ì°¾ì•˜ê¸° ë•Œë¬¸ì´ë‹¤. 

`getAllByRole()`ì€ ì¦‰ì‹œ screen ì˜ ìš”ì†Œë¥¼ ì°¾ìœ¼ë ¤ í•˜ëŠ”ë° Async ëŠ” HTTP ë¹„ë™ê¸° í˜¸ì¶œì„ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì´ë‹¤. ì²˜ìŒ ìƒíƒœëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì•„ì´í…œì´ í•˜ë‚˜ë„ ì—†ëŠ” ìƒíƒœë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì„ ìƒê°í•œë‹¤ë©´ ì´ ê³µë°±ìœ¼ë¡œ ì¸í•´ ì•„ë¬´ ê²ƒë„ ê°€ì ¸ì˜¤ì§€ ëª»í•˜ëŠ” ê±°ë‹¤. 

ê·¸ëŸ¬ë¯€ë¡œ **Promise** ë¥¼ ë°˜í™˜í•˜ì—¬ ì¬í‰ê°€ ê°€ëŠ¥ì„±ì„ ì—¬ëŠ” `fineAllByRole()` ë¡œ ë°”ê¾¸ë©´ ì œëŒ€ë¡œ ëœ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.  ( timeout í…€ì„ ì§€ì •í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ë³¸ ê°’ì€ 1 ì´ë‹¤ ) 
ë§ë¶™ì—¬ **promise** ë¥¼ ë°˜í™˜í•˜ëŠ” ë§Œí¼ `test` ëŠ” **async** í•¨ìˆ˜ë¡œ ì‹¤í–‰ ë˜ì–´ì•¼ í•œë‹¤. 

```jsx
import { render, screen } from "@testing-library/react";
import Async from "./Async";

describe("async component", () => {
  test("renders posts if request succedds", **async** () => {
    render(<Async />);

    const listItemElemlents = **await screen.findAllByRole("listitem");**
    expect(listItemElemlents).not.toHaveLength(0);
  });
});
```

# Definition

ìœ„ì˜ í…ŒìŠ¤íŠ¸ëŠ” HTTP ìš”ì²­ì„ ë³´ë‚´ê³  ìˆëŠ”ë°, ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤.

<aside>
ğŸŒŸ  ê°œë°œ ê³¼ì •ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•  ë•Œ ì•„ë˜ì™€ ê°™ì€ ì´ìœ ë¡œ ì„œë²„ì— HTTP ìš”ì²­ì„ ì „ì†¡í•˜ì§„ ì•ŠëŠ”ë‹¤.

1. ë§ì€ í…ŒìŠ¤íŠ¸ê°€ HTTP ìš”ì²­ì„ í•  ê²½ìš° ê³¼ë¶€í•˜ ë°œìƒ
2. ì„œë²„ë¡œ POST ìš”ì²­í•œë‹¤ë©´ í…ŒìŠ¤íŠ¸ë¡œ ì¸í•´ DB ì— ë°ì´í„°ê°€ ì‚½ì…ë˜ê±°ë‚˜ ì„œë²„ì˜ ë‚´ìš©ì´ ë°”ë€ë‹¤.

</aside>

ê·¸ëŸ¬ë¯€ë¡œ ë³´í†µ ì·¨í•˜ëŠ” ë°©ì‹ì€ í…ŒìŠ¤íŒ… ì „ìš© ì„œë²„ë¡œ ìš”ì²­ì„ ì „ì†¡í•˜ê±°ë‚˜, ì•„ì˜ˆ í•˜ì§€ ì•ŠëŠ”ë‹¤. 
ì´ë²ˆ ì‹œê°„ì—” ì „ì†¡ì„ í•˜ì§€ ì•ŠëŠ” ìœ í˜•ìœ¼ë¡œ ì§„í–‰í•œë‹¤.

í•œ ê°€ì§€ ì¤‘ìš”í•œ ê±´ **ë‚´ê°€ ì‘ì„±í•˜ì§€ ì•Šì€ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ í•´ì„  ì•ˆëœë‹¤.** ìš°ë¦¬ëŠ” fetch ê°€ ì„±ê³µì ìœ¼ë¡œ ìš”ì²­ì„ ì „ì†¡í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•˜ì§€ ì•ŠëŠ” ëŒ€ì‹  ì „ì†¡ëœ ìš”ì²­ì˜ ì„œë¡œ ë‹¤ë¥¸ ê²°ê³¼ì— ë”°ë¼ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ì˜¬ë°”ë¡œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ì•¼ í•œë‹¤. 

ë‹¨ ìš”ì²­ ì „ì†¡ì´ ì„±ê³µí–ˆëŠ”ì§€ëŠ” **ë¬´ì–¸ê°€ë¡œ ëŒ€ì²´** í•´ì•¼ í•œë‹¤. Jest ëŠ” ì´ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ í‰ë‚´ë‚´ëŠ” ë‚´ì¥ ì§€ì›ì±…ì´ ì¡´ì¬í•œë‹¤. ê·¸ë˜ì„œ í™œìš©í•˜ê¸° ì‰½ë‹¤.

`Async.test.js` ì—ì„œ ì‹¤í–‰í•˜ëŠ” `fetch` ëŠ” ìš°ë¦¬ë§Œì˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ë®ì–´ ì¨ì•¼ í•œë‹¤. 
`window.fetch = jset.fn()` ì„ ì„ ì–¸í•˜ëŠ”ë° fn ì€ mock í•¨ìˆ˜ë¥¼ ë§Œë“ ë‹¨ ì˜ë¯¸ë‹¤.

```jsx
import { render, screen } from "@testing-library/react";
import Async from "./Async";

describe("async component", () => {
  test("renders posts if request succedds", async () => {
    **window.fetch = jest.fn();**
    **window.fetch.mockResolvedValueOnce({
      json: async () => [{ id: "p1", title: "First post" }]
    });** // promise ê°€ ë°˜í™˜í•¨ì„ ì„¤ì •
    render(<Async />);

    const listItemElemlents = await screen.findAllByRole("listitem");
    expect(listItemElemlents).not.toHaveLength(0);
  });
});
```

ì´ë²ˆì— ì ìš©í•  `window.fetch.mockResolvedValueOnce()`ì€ fetch ê°€ ì¼ì–´ë‚  ë•Œ ë¦¬í„´ í•  ê°’ì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘ê³  ê·¸ ê°’ì„ ë¦¬í„´ í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.

ê·¸ ë°–ì— `jest.fn` ì—ëŠ” ë‹¤ë¥¸ ë§ì€ ê¸°ëŠ¥ë“¤ì´ ì¡´ì¬í•˜ë¯€ë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±í•´ê°€ë©´ì„œ ì‹¤ë ¥ì„ ê¸¸ëŸ¬ë‚˜ê°€ì.